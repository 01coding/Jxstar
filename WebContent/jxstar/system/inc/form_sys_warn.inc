	config.initpage = function(fnode) {		//校验间隔值的合法性		var valid = function(strObj) {			var len = strObj.length;			var unit = strObj.charAt(len-1);			if (unit != 'd' && unit != 'h' && unit != 'm') {				JxHint.alert(jx.sys.nottime);	//'间隔时间值不合法，按Ctrl+F1键查看填写说明！'				return false;			}						var value = strObj.substring(0, len-1);			if (isNaN(value)) {				JxHint.alert(jx.sys.nottime);				return false;			}			return true;		};			//注册保存前事件		fnode.event.on('beforesave', function(fe, data, eventcode){			var runPlan = fe.form.get('warn_base__run_plan');			var timeValue = fe.form.get('warn_base__time_value');						if (runPlan.length > 0 && valid(runPlan) == false) return false;			if (timeValue.length > 0 && valid(timeValue) == false) return false;						return true;		});	};		config.eventcfg = {			initOther: function(){			var state = this.form.get('warn_base__run_state');			var tbar = this.page.getTopToolbar();			//状态为注册的不需要禁用			//状态为生效的不需要启用			JxUtil.delay(500, function(){				JxUtil.getButton(tbar, 'disable').setDisabled(state != '2');				JxUtil.getButton(tbar, 'enable').setDisabled(state == '2');				JxUtil.getButton(tbar, 'delete').setDisabled(state == '2');			});		},				/**		 * 启用上报		 **/		enable: function() {			var keyid = this.getPkField().getValue();			if (keyid.length == 0) {				JxHint.alert(jx.event.nosave);				return;			}						var self = this;			var hdcall = function() {				var endcall = function() {					self.form.oset('warn_base__run_state', '2');					self.form.myRecord.set('warn_base__run_state', '2');					self.form.myRecord.commit();					self.initOther();				};				//发送请求				var params = 'funid=sys_warn&pagetype=form&eventcode=enable&keyid=' + keyid;				Request.postRequest(params, endcall);			};			//'确定设置该上报为生效吗？'			Ext.Msg.confirm(jx.base.hint, jx.sys.useyes, function(btn) {				if (btn == "yes") hdcall();			});		},				/**		 * 禁用上报		 **/		disable: function() {			var keyid = this.getPkField().getValue();			if (keyid.length == 0) {				JxHint.alert(jx.event.nosave);				return;			}						var self = this;			var hdcall = function() {				var endcall = function() {					self.form.oset('warn_base__run_state', '3');					self.form.myRecord.set('warn_base__run_state', '3');					self.form.myRecord.commit();					self.initOther();				};				//发送请求				var params = 'funid=sys_warn&pagetype=form&eventcode=disable&keyid=' + keyid;				Request.postRequest(params, endcall);			};			//'确定禁用该上报吗？'			Ext.Msg.confirm(jx.base.hint, jx.sys.disyes, function(btn) {				if (btn == "yes") hdcall();			});		}	};